<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Main</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
    <style>

header, footer {
  align: center;
  vertical-align: middle;
  background: #008000;
  height: 90px;
}

.container1 {
  float: right;
  width: 75%;
  padding: 0 15px;
  margin: 5% 0% 0% 0%;
  background: #FFFFFF;
  height: 500px;
  box-shadow: 0 16px 32px 0 rgba(0,0,0,0.50), 0 6px 20px 0 rgba(0,0,0,0.50);
  position: relative;
  z-index:1;
}
.container2 {
  float: left;
  width: 75%;
  padding: 0 15px;
  margin: 5% 0% 0% 13%;
  background: #FFFFFF;
  height: 500px;
  box-shadow: 0 16px 32px 0 rgba(0,0,0,0.50), 0 6px 20px 0 rgba(0,0,0,0.50);
}
.container3 {
  float: left;
  width: 75%;
  padding: 0 15px;
  margin: 5% 0% 0% 0%;
  background: #FFFFFF;
  height: 500px;
  box-shadow: 0 16px 32px 0 rgba(0,0,0,0.50), 0 6px 20px 0 rgba(0,0,0,0.50);
}

.button-group .button {
  width: 100%;
  background-color: #008000; /* Green */
  border: 1px solid green;
  color: white;
  text-align: center;
  text-decoration: none;
  font-size: 16px;
  cursor: pointer;
  display: block;
  padding: 15px 32px;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 3px 10px 0 rgba(0,0,0,0.50);
}

.button {
  margin: 0px 0px 10px 0px;
}

.button-group .button:not(:last-child) {
  border-bottom: none; /* Prevent double borders */
}

.button-group .button:hover {
  background-color: #228B22;
}

.container_1 {
  float: center;
  width: 90%;
  margin: 0px auto;
  height: 90%;
}

.container_2 {
  float: center;
  width: 100%;
  margin: 0px auto;
  height: 15%;
}

.container_3 {
  float: center;
  width: 90%;
  margin: 20px auto;
  background: #EEE8AA;
  height: 49.6%;
}

.container_4 {
  float: center;
  width: 90%;
  margin: 15px auto;
  height: 60%;
}

.container_5 {
  float: center;
  width: 90%;
  margin: 15px auto;
  height: 39%;
}

.container_6 {
  float: center;
  width: 100%;
  margin: 15px auto;
  background: #EEE8AA;
  height: 41%;
}

.container_7 {
  float: center;
  width: 100%;
  margin: 10px auto;
  height: 15%;
}

.container_head1 {
  float: right;
  width: 100%;
  padding: 10px;
  margin: 0px 0px 0px 20px;
  height: 100%;
  color: white;
  text-align: center;
  text-decoration: none;
  font-family: "Times New Roman", Times, serif;
}

.container10 {
  width: 100%;
  padding: 0 0px;
  margin: 20px 0px 20px 0px;
  background: #EEE8AA;
  height: 30%;
}

.container11 {
  color: #000000;
  text-align: left;
  text-decoration: none;
  font-size: 16px;
  font-family: Arial, Helvetica, sans-serif;
  width: 100%;
  padding: 0.04px 0px 0px 0px;
  margin: 0px 0px 0px 0px;
  height: 11%;
}

.container11_2 {
  color: #008000;
  text-align: center;
  text-align-vertical: justify;
  text-decoration: none;
  font-size: 20px;
  font-family: Arial, Helvetica, sans-serif;
  width: 100%;
  padding: 2px 0px 0px 0px;
  margin: 0px 0px 0px 0px;
  height: 7%;
  border: 1.5px solid green;
  border-radius: 5px;
}

p {
  padding: 0px 0px 0px 0px;
  margin: 10px 0px 0px 0px;
}

.container12 {
  color: #008000;
  text-align: center;
  text-align-vertical: justify;
  text-decoration: none;
  font-size: 20px;
  font-family: Arial, Helvetica, sans-serif;
  width: 100%;
  padding: 2px 0px 0px 0px;
  margin: 20px 0px 10px 0px;
  height: 32px;
  border: 1.5px solid green;
  border-radius: 5px;
}

.container14 {
  width: 100%;
  padding: 0.04px 0px 0px 0px;
  margin: 5px 0px 0px 0px;
  height: 10%;
}

.container13 {
  float: left
  color: #008000;
  text-align: center;
  text-decoration: none;
  font-size: 26px;
  font-family: Arial, Helvetica, sans-serif;
  width: 18%;
  padding: 6px 0px 0px 0px;
  margin: 0px 0px 0px 0px;
  height: 95%;
  position: relative;
  z-index:1;
}

.container15 {
  float: right
  color: #008000;
  text-align: center;
  text-decoration: none;
  font-size: 16px;
  font-family: Arial, Helvetica, sans-serif;
  width: 70%;
  padding: 0.04px 0px 0px 0px;
  margin: 0px 0px 0px 0px;
  height: 100%;
  position: relative;
  z-index:1;
}

.container15, .container13 {
  display: inline-block;
}

.hidden {
  display: none;
}

.newContainer1 {
  color: #FFFFFF;
  text-align: center;
  text-decoration: none;
  font-size: 26px;
  font-family: Arial, Helvetica, sans-serif;
  height: 13%;
  background-color: green;
  padding: 15px;
}

.windowNew {
  height: 90%;
  width: 100%;
  margin: 3px 0% 0% 0%;
  background-color: white;
  box-shadow: 0px 0px 0px 10000px rgba(0,0,0,0.50);
  position: relative;
  z-index:1;"
}

tr table {
    width: 100%;
}

td {
    width: 50%;
}

    </style>
</head>

<script>
function CBR_XML_Daily_Ru(rates) {
  function trend(current, previous) {
    if (current > previous) return ' ▲';
    if (current < previous) return ' ▼';
    return '';
  }

  var USDrate = rates.Valute.USD.Value.toFixed(4).replace('.', ',');
  var USD = document.getElementById('USD');
  USD.innerHTML = USD.innerHTML.replace('00,0000', USDrate);
  USD.innerHTML += trend(rates.Valute.USD.Value, rates.Valute.USD.Previous);

  var EURrate = rates.Valute.EUR.Value.toFixed(4).replace('.', ',');
  var EUR = document.getElementById('EUR');
  EUR.innerHTML = EUR.innerHTML.replace('00,0000', EURrate);
  EUR.innerHTML += trend(rates.Valute.EUR.Value, rates.Valute.EUR.Previous);
}
</script>
<link rel="dns-prefetch" href="https://www.cbr-xml-daily.ru/" />
<script src="//www.cbr-xml-daily.ru/daily_jsonp.js" async></script>


<body style="background-color: green;" ng-app="MAIN_PAGE" ng-controller="MAIN_PAGE_CONTROLLER">


    <div class="row" style="height: 150px; background-color: green; padding: 75px;">
        <div class="col-md-3"></div>
        <div class="col-md-6">
            <div class="container_head1">
                <p align="center" style="color: white; font-size: 70px; margin: 0 0 0 0; padding: 0 0 0 0; text-align: center;">MiniBank</p>
            </div>
        </div>
        <div class="col-md-3"></div>
    </div>



    <div class="row" style="height: 600px; background-color: green; padding: 20px;">



        <div class="col-md-4" style="background-color: green;">
            <div class="container1">
                <div class="container_1">
                    <div class="container10"></div>
                    <div class="container11_2">
                        <h5>ФИО:</h5>
                    </div>

                    <div class="container11">
                        <div class="container16"></div>
                        <div class="container17">
                            <p th:text="${userById.userName}"></p>
                        </div>
                    </div>
                    <div class="container11_2">
                        <h5>Дата рождения:</h5>
                    </div>
                    <div class="container11">
                        <div class="container16"></div>
                        <div class="container17">
                            <p th:text="${userById.birthdayDataFormat()}"></p>
                        </div>
                    </div>
                    <div class="container11_2">
                        <h5>email:</h5>
                    </div>
                    <div class="container11">
                        <div class="container16"></div>
                        <div class="container17">
                            <p th:text="${userById.email}"></p>
                        </div>
                    </div>
                    <div class="container_2">
                        <div class="button-group" style="align: center;  width: 100%;">
                            <button class="button">История операций</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>



        <div class="col-md-4" style="background-color: green;">
            <div class="container2">
                <div class="container_1">
                    <div class="container12">
                        <h5>Общий счёт:</h5>
                    </div>
                    <div class="container14">
                        <div class="container13">
                            <h4 style="color: #008000;">&#8381;</h4>
                        </div>
                        <div class="container15">
                            <p th:text="${userById.bankAccount}"></p>
                        </div>
                    </div>
                    <div class="container14">
                        <div class="container13">
                            <h4 style="color: #008000;">&#36;</h4>
                        </div>
                        <div class="container15">
                            <p th:text="${userById.balanceDollar}"></p>
                        </div>
                    </div>
                    <div class="container14">
                        <div class="container13">
                            <h4 style="color: #008000;">&#128;</h4>
                        </div>
                        <div class="container15">
                            <p th:text="${userById.balanceEuro}"></p>
                        </div>
                    </div>
                    <div class="container_6">
                        <table border="1">
                            <thead>
                                <th>Номер карты</th>
                                <th>Баланс</th>
                                <tr th:each="card : ${userById.bankCard}">
                                    <td th:text="${card.card_number}"/>
                                    <td th:text="${card.balance}"/>
                                </tr>
                            </thead>
                        </table>
                    </div>
                    <div class="container_2">
                        <div class="button-group" style="align: center; width: 100%;">
                            <button class="button share-widget">Добавить карту</button>
                        </div>
                    </div>
            </div>
            </div>

            <!--Невидимое окошко (Настроить видимость!)-->
            <div id="newWindow" class="hidden windowNew">

                <div class="newContainer1">
                    <h1>Создание карты:</h1>
                </div>
                <div style="height: 93%; background-color: white; padding: 20px;">
<!--                    card_id : $scope.bankCard.card_id,-->
<!--                    card_expiry_date : null,-->
<!--                    cvc2 : $scope.bankCard.cvc2,-->
<!--                    card_number : $scope.bankCard.card_number,-->
<!--                    balance : $scope.bankCard.balance,-->
<!--                    categoryCard : null-->
                    <form>
                        <div class="form-group">
                            <label for="inputCardId">ID новой карты:</label>
                            <input ng-model="bankCard.card_id" class="form-control" type="number" id="inputCardId">
                        </div>
                        <div class="form-group">
                            <label for="inputCVC2">CVC2:</label>
                            <input ng-model="bankCard.cvc2" class="form-control" type="number" id="inputCVC2">
                        </div>
                        <div class="form-group">
                            <label for="inputCardNumber">Номер карты:</label>
                            <input ng-model="bankCard.card_number" class="form-control" type="number" id="inputCardNumber">
                        </div>
                        <div class="form-group">
                            <label for="inputBalance">Начальный баланс:</label>
                            <input ng-model="bankCard.balance" class="form-control" type="number" id="inputBalance">
                        </div>
                        <div class="button-group">
                            <button  class="button share-widget">Отмена</button>
                            <button  id="reload" class="button" type="submit" th:onclick="'getPropId(\'' + ${userById.user_id} + '\');'" ng-click="saveBankCardForUser()">Сохранить карту</button>
                        </div>
                    </form>
                </div>
            </div>
            <!--Конец невидимого окна-->

        </div>





        <div class="col-md-4" style="background-color: green;">
            <div class="container3">
                <div class="container_3">
                    <div class="container12">
                        <h5>Курсы валют (ЦБ):</h5>
                    </div>
                    <div id="USD">Доллар США $ — 00,0000 руб.</div>
                    <div id="EUR">Евро € — 00,0000 руб.</div>
                </div>
                <div class="container_4">
                    <div class="button-group" style="align: center; width: 100%;">
                        <div class="container_7">
                            <button class="button" style="align: center; width: 100%;">Перевести</button>
                        </div>
                        <div class="container_7">
                            <button class="button" style="align: center; width: 100%;">Пополнить</button>
                        </div>
                        <div class="container_7">
                            <button class="button" style="align: center; width: 100%;">Валюта</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <script type="text/javascript">

        var idForUser = 0;

        var app = angular.module("MAIN_PAGE", []);
        app.controller("MAIN_PAGE_CONTROLLER", function($scope, $http) {
            console.log("Start JS");


            $scope.saveBankCardForUser = function() {
                $http({
                    url: '/home/addCardForUser/user_id=' + idForUser,
                    method: 'POST',
                    data:
                    {
                        card_id : $scope.bankCard.card_id,
                        card_expiry_date : null,
                        cvc2 : null,
                        card_number : $scope.bankCard.card_number,
                        balance : $scope.bankCard.balance,
                        categoryCard : null
                    }
                }).then(function(response){
                    console.log(response);
                });
            }

        });

        $('.share-widget').click(function() {
            $('#newWindow').toggleClass('hidden');
            $('.container1').toggleClass('hidden');
            $('.container2').toggleClass('hidden');
            $('.container3').toggleClass('hidden');
        });

        function getPropId(inputID){
            idForUser = inputID;
            console.log('inputID');
            console.log(inputID);
            console.log('idForUser');
            console.log(idForUser);
        }

        $('#reload').click(function() {
            location.reload();
        });



    </script>



</body>
</html>